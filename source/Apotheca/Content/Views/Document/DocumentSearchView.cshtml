@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@using Apotheca.Navigation;
@using System.Linq;
@model Apotheca.ViewModels.Document.DocumentSearchViewModel
@{
    Layout = "Content/Layouts/MainLayout.cshtml";
}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Search for a Document</h1>
    </div>
</div>
<div class="row">
    <div class="col-md-8">
        <form class="margin-bottom-15px" role="form" method="post" action="@Actions.Document.Search">
            <fieldset>
                <div class="form-group">
                    <input id="txt-name" class="form-control" placeholder="Search for..." name="SearchText" type="text" value="@Model.SearchText" aria-describedby="helpSearchText" />
                    <span id="helpSearchText" class="help-block">The document name, title, description and contents (for supported document types) will be searched.</span>
                </div>
                <button id="btn-submit-document" type="submit" class="btn btn-lg btn-primary" adisabled="disabled">Search</button>
            </fieldset>
        </form>
    </div>
</div>
@if (Model.IsResultGridVisible)
{
    <div class="row">
        <div class="col-lg-12">
            <table class="table table-striped table-hover table-bordered">
                <tr>
                    <th>File Name</th>
                    <th>Created By</th>
                    <th>Created On</th>
                </tr>
                @foreach (var r in Model.Results)
                {
                    <tr>
                        <td><a href="@(Actions.Document.Download)?id=@r.DocumentId">@r.FileName</a></td>
                        <td>@r.CreatedBy</td>
                        <td>@r.CreatedOn</td>
                    </tr>
                }
            </table>
            <p class="bg-info info-panel">Documents found: @Model.Results.Count</p>
        </div>
    </div>
}